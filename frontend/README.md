# 診所數位化系統 - 前端

這是診所數位化系統的前端應用程式，使用 React + TypeScript + Vite 建置。

## 功能特色

### 病人端功能
- ✅ 病人註冊與登入
- ✅ 查詢可預約門診時段（支援科別、醫師、日期篩選）
- ✅ 掛號管理（新增、取消、改期、報到）
- ✅ 查看完整就診記錄（就診記錄、處方箋、檢驗結果、繳費記錄）
- ✅ 線上繳費

### 醫師端功能
- ✅ 醫師註冊與登入
- ✅ 門診時段管理（新增、編輯、取消）
- ✅ 預約管理（查看門診時段的掛號清單）
- ✅ 就診記錄管理（建立/編輯就診記錄，支援草稿與定稿狀態）
- ✅ 診斷管理（新增診斷、設定主要診斷）
- ✅ 處方管理（建立/編輯處方箋，支援多個藥品項目）
- ✅ 檢驗結果管理（新增檢驗結果）
- ✅ 繳費管理（建立/更新繳費資料）

## 技術棧

- **框架**: React 19
- **語言**: TypeScript
- **建置工具**: Vite
- **路由**: React Router DOM
- **HTTP 客戶端**: Axios
- **狀態管理**: React Context API

## 安裝與執行

### 1. 安裝依賴

```bash
cd frontend
npm install
```

### 2. 啟動開發伺服器

```bash
npm run dev
```

前端應用程式將在 `http://localhost:5173` 啟動（Vite 預設端口）。

### 3. 建置生產版本

```bash
npm run build
```

建置完成的檔案會在 `dist` 目錄中。

### 4. 預覽生產版本

```bash
npm run preview
```

## 專案結構

```
frontend/
├── src/
│   ├── components/          # 共用組件
│   │   ├── Layout.tsx        # 主要佈局組件
│   │   └── Layout.css
│   ├── context/              # React Context
│   │   └── AuthContext.tsx   # 認證上下文
│   ├── pages/                # 頁面組件
│   │   ├── Home.tsx          # 首頁
│   │   ├── patient/          # 病人端頁面
│   │   │   ├── PatientLogin.tsx
│   │   │   ├── PatientRegister.tsx
│   │   │   ├── PatientAppointments.tsx
│   │   │   ├── PatientHistory.tsx
│   │   │   └── PatientPayments.tsx
│   │   └── provider/         # 醫師端頁面
│   │       ├── ProviderLogin.tsx
│   │       ├── ProviderRegister.tsx
│   │       ├── ProviderSessions.tsx
│   │       ├── ProviderAppointments.tsx
│   │       └── ProviderEncounter.tsx
│   ├── services/             # API 服務層
│   │   └── api.ts            # 封裝所有後端 API 呼叫
│   ├── types/                # TypeScript 類型定義
│   │   └── index.ts
│   ├── App.tsx               # 主應用程式（路由設定）
│   ├── App.css               # 全域樣式
│   ├── main.tsx              # 應用程式入口
│   └── index.css             # 基礎樣式
├── package.json
└── vite.config.ts
```

## API 連線設定

預設 API 基礎 URL 為 `http://localhost:8000`，可在 `src/services/api.ts` 中修改：

```typescript
const API_BASE_URL = 'http://localhost:8000';
```

請確保後端 API 伺服器正在運行，並且 CORS 設定允許前端來源的請求。

## 使用說明

### 病人端使用流程

1. **註冊/登入**
   - 訪問首頁，點擊「病人註冊」或「病人登入」
   - 填寫必要資訊完成註冊或登入

2. **掛號**
   - 登入後進入「我的掛號」頁面
   - 點擊「新增掛號」按鈕
   - 使用篩選條件查詢可預約的門診時段
   - 選擇門診時段並確認掛號

3. **查看歷史記錄**
   - 進入「就診記錄」頁面
   - 使用標籤頁切換查看不同類型的記錄（就診記錄、處方箋、檢驗結果、繳費記錄）

4. **線上繳費**
   - 進入「繳費記錄」頁面
   - 點擊「線上繳費」按鈕
   - 選擇付款方式並填寫發票號碼（選填）
   - 確認繳費

### 醫師端使用流程

1. **註冊/登入**
   - 訪問首頁，點擊「醫師註冊」或「醫師登入」
   - 填寫必要資訊完成註冊或登入

2. **管理門診時段**
   - 登入後進入「門診時段」頁面
   - 點擊「新增門診時段」建立新的門診時段
   - 可以編輯或取消現有的門診時段
   - 使用篩選條件查詢特定日期範圍或狀態的門診時段

3. **查看預約**
   - 在門診時段列表中點擊「查看預約」
   - 查看該門診時段的所有掛號清單

4. **填寫就診記錄**
   - 在預約列表中點擊「查看/編輯就診記錄」
   - 填寫就診記錄（主訴、主觀描述、評估、計畫）
   - 可以設定為草稿或定稿狀態
   - 定稿後無法再編輯

5. **新增診斷**
   - 在就診記錄頁面切換到「診斷」標籤
   - 輸入 ICD 代碼並選擇是否設為主要診斷
   - 可以將現有診斷設為主要診斷

6. **開立處方**
   - 切換到「處方」標籤
   - 新增處方項目（藥品 ID、劑量、頻率、天數、數量）
   - 可以新增多個處方項目
   - 儲存處方

7. **新增檢驗結果**
   - 切換到「檢驗結果」標籤
   - 填寫檢驗項目資訊
   - 新增檢驗結果

8. **建立繳費資料**
   - 切換到「繳費」標籤
   - 輸入金額、選擇付款方式、填寫發票號碼（選填）
   - 儲存繳費資料

## 注意事項

1. **後端 API 連線**
   - 確保後端 API 伺服器正在運行（預設端口 8000）
   - 確保後端已設定 CORS 允許前端來源的請求

2. **認證狀態**
   - 登入狀態會儲存在 localStorage 中
   - 重新整理頁面會自動恢復登入狀態
   - 登出會清除所有認證資訊

3. **資料驗證**
   - 前端會進行基本的表單驗證
   - 後端 API 會進行更嚴格的資料驗證
   - 請確保輸入的資料格式正確

## 開發建議

- 使用瀏覽器開發者工具查看網路請求和回應
- 檢查瀏覽器控制台是否有錯誤訊息
- 確保後端 API 文檔（Swagger UI）與前端實作一致

## 授權

本專案為學術專題專案。
